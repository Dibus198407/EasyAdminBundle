{# @var ea \EasyCorp\Bundle\EasyAdminBundle\Context\ApplicationContext #}
{# @var fields \EasyCorp\Bundle\EasyAdminBundle\Contracts\FieldInterface[] #}
{% extends ea.template('layout') %}
{% trans_default_domain ea.dashboard.translationDomain %}

{% block body_id 'easyadmin-detail-' ~ ea.entity.shortClassName ~ '-' ~ ea.entity.idValue %}
{% block body_class 'detail detail-' ~ ea.entity.shortClassName %}

{% block content_title %}
    {% apply spaceless %}
        {% set default_title = 'page.detail.title'|trans(ea.i18n.transParameters, 'EasyAdminBundle') %}
        {{ ea.page.title is null ? default_title|raw : ea.page.title|trans(ea.i18n.transParameters)|raw }}
    {% endapply %}
{% endblock %}

{% block content_footer_wrapper '' %}

{% block main %}
    <div class="form-horizontal">
        {% block show_fields %}
            {% for field in fields %}
                {% block show_field %}
                    <div class="form-group field-{{ field.type|lower }} {{ field.cssClass ?? '' }}">
                        <label class="control-label">
                            {{ field.label|trans(ea.i18n.transParameters)|raw }}
                        </label>
                        <div class="form-widget">
                            <div class="form-control">
                                {{ ea_render_field(field, ea.entity) }}
                            </div>

                            {% if field.help is not empty %}
                                <small class="form-help"><i class="fa fa-fw fa-info-circle"></i> {{ field.help|trans|raw }}</small>
                            {% endif %}
                        </div>
                    </div>
                {% endblock %}
            {% endfor %}
        {% endblock %}
    </div>

    {% if ea.actions is not empty %}
        <section class="content-footer">
            <div class="form-actions">
                {% block item_actions %}
                    {% for action in ea.actions %}
                        {{ include(action.template) }}
                    {% endfor %}
                {% endblock item_actions %}
            </div>
        </section>
    {% endif %}

    {% block delete_form %}
        {{ include('@EasyAdmin/includes/_delete_form.html.twig', {
            view: 'show',
            referer: app.request.query.get('referer', ''),
            delete_form: delete_form,
        }) }}
    {% endblock delete_form %}
{% endblock %}

{% block body_javascript %}
    {{ parent() }}

    <script type="text/javascript">
        $(function() {
            $('a.action-delete').on('click', function(e) {
                e.preventDefault();

                $('#modal-delete').modal({ backdrop: true, keyboard: true })
                    .off('click', '#modal-delete-button')
                    .on('click', '#modal-delete-button', function () {
                        $('#delete-form').trigger('submit');
                    });
            });
        });
    </script>
{% endblock %}
